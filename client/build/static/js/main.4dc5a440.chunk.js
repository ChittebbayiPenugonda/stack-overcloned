(this["webpackJsonpstack-overcloned"]=this["webpackJsonpstack-overcloned"]||[]).push([[0],{218:function(t,e,n){"use strict";n.r(e);var a,r,i,o=n(1),c=n.n(o),s=n(82),l=n.n(s),d=n(6),u=n(83),j=n(3),b=n(2),p=n(87),h=n(88),x=n(10),m=Object(o.createContext)(null),O=n(0),f=b.c.header(a||(a=Object(j.a)(["\n  background-color: #393939;\n  box-shadow: 0 3px 3px rgba(0,0,0,.2);\n  display:grid;\n  grid-template-columns: 1fr 200px;\n  grid-column-gap: 20px;\n"]))),g=Object(b.c)(x.b)(r||(r=Object(j.a)(["\n  color:#fff;\n  text-decoration: none;\n  display: inline-block;\n  height: 50px;\n  line-height: 30px;\n  padding: 0px 15px;\n  svg{\n    margin-top: 7px;\n    display: inline-block;\n    float:left;\n  }\n  span{\n    display: inline-block;\n    padding-left:5px;\n    padding-top: 10px;\n    font-size:1.2rem;\n    font-weight: 300;\n  }\n  b{\n    font-weight: normal;\n    display: inline-block;\n    margin-left:2px;\n  }\n"]))),v=Object(b.c)(x.b)(i||(i=Object(j.a)(["\n  color:#fff;\n  padding: 0 20px;\n  text-decoration: none;\n  line-height: 50px;\n  text-align: right;\n"])));var k,w=function(){var t=Object(o.useContext)(m).user;return Object(O.jsxs)(f,{children:[Object(O.jsxs)(g,{to:"/",className:"logo",children:[Object(O.jsx)(p.a,{icon:h.a,size:"2x"}),Object(O.jsxs)("span",{children:["stack",Object(O.jsx)("b",{children:"overcloned"})]})]}),t&&Object(O.jsx)(v,{to:"/users/"+t.id,className:"profile",children:t.name||t.email}),!t&&Object(O.jsxs)("div",{children:[Object(O.jsx)(v,{to:"/login",className:"profile",children:"Log in"}),Object(O.jsx)(v,{to:"/register",className:"profile",children:"Register"})]})]})},y=Object(b.c)(x.b)(k||(k=Object(j.a)(["\n  display: inline-block;\n  margin-right: 5px;\n  background-color: #3e4a52;\n  color:#9cc3db;\n  padding: 7px;\n  border-radius: 4px;\n  font-size: .9rem;\n  text-decoration: none;\n  transition: all .2s ease;\n  &:hover{\n    background-color: #5e6a72;\n    color:#bce3fb;\n  }\n"])));var C=function(t){var e=t.name;return Object(O.jsx)(y,{to:"/tag/"+e,children:e})};var S,z=function(t){return t.children.replace("T"," ").substr(0,t.children.length-5)},_=n(14),T=Object(b.c)(x.b)(S||(S=Object(j.a)(["\n  color: #3ca4ff;\n  text-decoration: none;\n  &:hover{\n    text-decoration: underline;\n  }\n"])));var q,A,P,F,I,N=function(t){return Object(O.jsx)(T,Object(_.a)({to:"/users/"+t.id},t))},U=b.c.div(q||(q=Object(j.a)(["\n  text-align: center;\n  display: inline-block;\n  font-size: 1.2rem;\n  color:#aaa;\n  margin-top:7px;\n  span{\n    font-size:.7rem;\n    display: block;\n    font-weight: 300;\n    margin-top: 4px;\n  }\n"]))),D=b.c.div(A||(A=Object(j.a)(["\n  padding: 0 30px;\n"]))),B=Object(b.c)(x.b)(P||(P=Object(j.a)(["\n  text-decoration: none;\n  color:#3ca4ff;\n  font-size: 1.1rem;\n  display: block;\n  margin-bottom: 5px;\n"]))),E=b.c.div(F||(F=Object(j.a)(["\n  background-color: rgba(255,255,255,.05);\n  padding: 15px 15px 10px;\n  display: grid;\n  grid-template-columns: repeat(3, 50px) 1fr;\n  border-top: 1px solid #555;\n"]))),H=b.c.div(I||(I=Object(j.a)(["\n  display: inline-block;\n  color:#aaa;\n  font-size: .8rem;\n  float:right;\n  padding: 10px 0;\n"])));var Y,L,R,Q=function(t){var e=t.title,n=t.id,a=t.tags,r=t.author,i=t.createdAt;return Object(O.jsxs)(E,{children:[Object(O.jsxs)(U,{children:["0",Object(O.jsx)("span",{children:"votes"})]}),Object(O.jsxs)(U,{children:["1",Object(O.jsx)("span",{children:"answers"})]}),Object(O.jsxs)(U,{children:["6",Object(O.jsx)("span",{children:"views"})]}),Object(O.jsxs)(D,{children:[Object(O.jsx)(B,{to:"/questions/"+n,children:e}),Object(O.jsxs)(H,{children:[Object(O.jsx)(z,{children:i})," ",Object(O.jsx)(N,{id:r.id,children:r.name||r.email})]}),a&&a.split(",").map((function(t){return Object(O.jsx)(C,{name:t})}))]})]})},M=b.c.h1(Y||(Y=Object(j.a)(["\n  font-size: 1.8rem;\n"]))),V=Object(b.c)(x.b)(L||(L=Object(j.a)(["\n  display: inline-block;\n  background-color: #378ad3;\n  color:#fff;\n  border:0;\n  border-radius: 5px;\n  padding: 12px 10px;\n  text-decoration: none;\n"]))),J=n(5),G=n.n(J),K=n(12),W=b.c.div(R||(R=Object(j.a)(["\n  display: grid;\n  grid-template-columns: 1fr min-content;\n  padding: 30px 20px;\n"])));var X,Z,$,tt,et=function(){var t=Object(o.useState)([]),e=Object(d.a)(t,2),n=e[0],a=e[1];return Object(o.useEffect)((function(){G.a.get("http://localhost:3030/questions",{withCredentials:!0}).then((function(t){return a(t.data)}))}),[]),Object(O.jsxs)("main",{children:[Object(O.jsx)(K.a,{children:Object(O.jsx)("title",{children:"StackOvercloned - home"})}),Object(O.jsxs)(W,{children:[Object(O.jsx)(M,{style:{margin:0},children:"Questions"}),Object(O.jsx)(V,{to:"/ask",children:"Ask\xa0Question"})]}),n&&n.length>0&&n.map((function(t){return Object(O.jsx)(Q,{title:t.title,id:t.id,createdAt:t.created_at,author:{id:t.user_id,name:t.name,email:t.email},tags:t.tags})}))]})},nt=n(7),at=b.c.button(X||(X=Object(j.a)(["\n  background-color: #378ad3;\n  color:#fff;\n  border:0;\n  border-radius: 5px;\n  padding: ",";\n  text-decoration: none;\n  font-size: ",";\n"])),(function(t){return"sm"===t.size?"8px 10px":"12px 20px"}),(function(t){return"sm"===t.size?".8rem":"1.1rem"})),rt=b.c.input(Z||(Z=Object(j.a)(["\n  background:none;\n  border: 1px solid #777;\n  border-radius: 3px;\n  display: block;\n  width:100%;\n  box-sizing: border-box;\n  padding: 10px;\n  margin-bottom: 20px;\n  color:#fff;\n"]))),it=n(91),ot=n.n(it),ct=n(35),st=n.n(ct),lt=n(36),dt=n.n(lt),ut=b.c.textarea($||($=Object(j.a)(["\n  background:none;\n  border: 1px solid #777;\n  border-radius: 3px;\n  display: block;\n  width:100%;\n  box-sizing: border-box;\n  padding: 10px;\n  min-height: 200px;\n  margin-bottom: 20px;\n  color:#fff;\n  font-family: inherit;\n"]))),jt=b.c.div(tt||(tt=Object(j.a)(["\n  padding: 10px 20px;\n  background-color: #444;\n  border-radius: 5px;\n  margin-bottom: 20px;\n"])));var bt,pt,ht=function(t){return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(ut,{onChange:function(e){return t.handlePostBodyChange(e.target.value)},placeholder:t.placeholder,value:t.value}),!!t.value&&t.value.length>0&&Object(O.jsx)(jt,{children:Object(O.jsx)(st.a,{plugins:[dt.a],children:t.value})})]})},xt=b.c.div(bt||(bt=Object(j.a)(["\n  padding: 30px 20px;\n"])));function mt(){var t=c.a.createRef(),e=Object(o.useState)(""),n=Object(d.a)(e,2),a=n[0],r=n[1],i=Object(o.useState)(""),s=Object(d.a)(i,2),l=s[0],u=s[1],j=Object(o.useState)(""),b=Object(d.a)(j,2),p=b[0],h=b[1],x=Object(o.useState)([]),m=Object(d.a)(x,2),f=m[0],g=m[1],v=Object(o.useState)([]),k=Object(d.a)(v,2),w=k[0],y=k[1];return Object(o.useEffect)((function(){G.a.get("http://localhost:3030/tags").then((function(t){y(t.data)}))}),[]),Object(O.jsxs)(xt,{children:[p&&Object(O.jsx)(nt.a,{to:p}),Object(O.jsx)(M,{style:{marginBottom:"20px"},children:"Ask a public question"}),Object(O.jsxs)("form",{onSubmit:function(t){return function(t){t.preventDefault(),G.a.post("http://localhost:3030/questions",{title:a,content:l,tags:f.map((function(t){return t.id}))},{withCredentials:!0}).then((function(t){console.log(t.data),h("/questions/"+t.data[0])}))}(t)},children:[Object(O.jsx)(rt,{type:"text",value:a,onChange:function(t){return r(t.target.value)},placeholder:"Title of your question"}),Object(O.jsx)(ht,{placeholder:"More info about your question. You can use markdown here",value:l,handlePostBodyChange:function(t){return u(t)}}),Object(O.jsx)(ot.a,{ref:t,tags:f,suggestions:w,onDelete:function(t){return function(t){for(var e=[],n=0;n<f.length;n++)n!==t&&e.push(f[n]);g(e)}(t)},onAddition:function(t){return function(t){var e=f;e.push(t),g(e)}(t)}}),Object(O.jsx)(at,{type:"submit",children:"Post question"})]})]})}var Ot,ft=Object(b.a)(pt||(pt=Object(j.a)(["\n  @import url('https://fonts.googleapis.com/css2?family=Roboto:wght@300,400;700&display=swap');\n  body{\n    background: #2d2d2d;\n    color:#fff;\n    font-family: Roboto, sans-serif;\n  }\n  b,strong{\n    font-weight: 700;\n  }\n  a{\n    color:#fff;\n  }\n  p{\n    margin: 10px 0;\n    line-height: 1.5rem;\n  }\n  h1,h2{\n    margin-top: 20px;\n    margin-bottom: 10px;\n  }\n  h1{\n    font-size: 1.8rem;\n  }\n  h2{\n    font-size: 1.6rem;\n  }\n  blockquote{\n    background-color: rgba(0,0,0,.1);\n    padding: 15px;\n    border-radius: 4px;\n  }\n  hr{\n    margin: 20px 0;\n    border-color:rgba(255,255,255,.1);\n  }\n  \n  // tags\n  .react-tags{\n    margin-bottom: 20px;\n    border: 1px solid #777;\n    border-radius: 3px;\n    padding: 15px;\n  }\n  .react-tags__selected{\n    display: inline-block;\n  }\n  .react-tags__selected-tag{\n    border:0;\n    display: inline-block;\n    margin-right: 5px;\n    background-color: #3e4a52;\n    color: #9cc3db;\n    padding: 7px;\n    border-radius: 4px;\n    font-size: .9rem;\n  }\n  .react-tags__search{\n    display: inline-block;\n  }\n  input.react-tags__search-input,\n  input.react-tags__search-input:focus\n  {\n    outline: none;\n    background: none;\n    border: none;\n    display: block;\n    width: 100%;\n    min-width: 300px;\n    box-sizing: border-box;\n    padding: 10px;\n    color: #fff;\n  }\n  .react-tags__suggestions{\n    position: absolute;\n  }\n"]))),gt=n(22),vt=n(23),kt=n(25),wt=n(24),yt=b.c.div(Ot||(Ot=Object(j.a)(["\n  background-color: rgba(255,0,0,.1);\n  border: 1px solid red;\n  padding: 20px;\n  color:#fff;\n  margin-bottom: 20px;\n  border-radius: 5px;\n"])));var Ct,St=function(t){return Object(O.jsx)(yt,Object(_.a)({},t))},zt=b.c.div(Ct||(Ct=Object(j.a)(["\n  padding: 30px 20px;\n"]))),_t=function(t){Object(kt.a)(n,t);var e=Object(wt.a)(n);function n(t){var a;return Object(gt.a)(this,n),(a=e.call(this,t)).state={email:"",password:"",redirectToHomePage:!1,error:!1},a}return Object(vt.a)(n,[{key:"login",value:function(t){var e=this;t.preventDefault(),G.a.post("http://localhost:3030/login",{email:this.state.email,password:this.state.password},{withCredentials:!0}).then((function(){e.context.checkAuth().then((function(){e.setState({error:!1,redirectToHomePage:!0})}))})).catch((function(){return e.setState({error:!0})}))}},{key:"render",value:function(){var t=this;return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(K.a,{children:Object(O.jsx)("title",{children:"StackOvercloned - login"})}),this.state.redirectToHomePage&&Object(O.jsx)(nt.a,{to:"/"}),Object(O.jsxs)(zt,{children:[Object(O.jsx)(M,{style:{marginBottom:"20px"},children:"Login"}),this.state.error&&Object(O.jsx)(St,{children:"Login failed"}),Object(O.jsxs)("form",{onSubmit:function(e){return t.login(e)},children:[Object(O.jsx)(rt,{placeholder:"email",type:"email",value:this.state.email,onChange:function(e){return t.setState({email:e.target.value})}}),Object(O.jsx)(rt,{placeholder:"password",type:"password",value:this.state.password,onChange:function(e){return t.setState({password:e.target.value})}}),Object(O.jsx)(at,{type:"submit",children:"Login"})]})]})]})}}]),n}(o.Component);_t.contextType=m;var Tt,qt=_t,At=b.c.div(Tt||(Tt=Object(j.a)(["\n  padding: 30px 20px;\n"]))),Pt=function(t){Object(kt.a)(n,t);var e=Object(wt.a)(n);function n(t){var a;return Object(gt.a)(this,n),(a=e.call(this,t)).state={email:"",password:"",name:"",redirectToTheHomePage:!1,error:!1},a}return Object(vt.a)(n,[{key:"register",value:function(t){var e=this;t.preventDefault(),G.a.post("http://localhost:3030/register",{email:this.state.email,password:this.state.password,name:this.state.name},{withCredentials:!0}).then((function(){e.context.checkAuth().then((function(){return e.setState({error:!1,redirectToTheHomePage:!0})}))})).catch((function(t){e.setState({error:t.response.data})}))}},{key:"render",value:function(){var t=this;return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(K.a,{children:Object(O.jsx)("title",{children:"StackOvercloned - register"})}),this.state.redirectToTheHomePage&&Object(O.jsx)(nt.a,{to:"/"}),Object(O.jsxs)(At,{children:[Object(O.jsx)(M,{style:{marginBottom:"20px"},children:"Register"}),this.state.error&&Object(O.jsx)(St,{children:this.state.error}),Object(O.jsxs)("form",{onSubmit:function(e){return t.register(e)},children:[Object(O.jsx)(rt,{placeholder:"email",type:"email",value:this.state.email,onChange:function(e){return t.setState({email:e.target.value})}}),Object(O.jsx)(rt,{placeholder:"your name",type:"text",value:this.state.name,onChange:function(e){return t.setState({name:e.target.value})}}),Object(O.jsx)(rt,{placeholder:"password",type:"password",value:this.state.password,autocomplete:"new-password",onChange:function(e){return t.setState({password:e.target.value})}}),Object(O.jsx)(at,{type:"submit",children:"Register"})]})]})]})}}]),n}(o.Component);Pt.contextType=m;var Ft,It=Pt,Nt=b.c.div(Ft||(Ft=Object(j.a)(["\n  background-color: rgba(0,255,0,.1);\n  border: 1px solid green;\n  padding: 20px;\n  color:#fff;\n  margin-bottom: 20px;\n  border-radius: 5px;\n"])));var Ut,Dt=function(t){return Object(O.jsx)(Nt,Object(_.a)({},t))},Bt=b.c.div(Ut||(Ut=Object(j.a)(["\n  padding: 30px 20px;\n"]))),Et=function(t){Object(kt.a)(n,t);var e=Object(wt.a)(n);function n(t){var a;return Object(gt.a)(this,n),(a=e.call(this,t)).state={showConfirmation:!1,redirectToTheHomePage:!1,username:""},a}return Object(vt.a)(n,[{key:"componentDidMount",value:function(){this.setState({username:this.context.user?this.context.user.name:""})}},{key:"logout",value:function(){var t=this;G.a.post("http://localhost:3030/logout",{},{withCredentials:!0}).then((function(){t.context.checkAuth().catch((function(){return t.setState({redirectToTheHomePage:!0})}))}))}},{key:"update",value:function(t){var e=this;t.preventDefault();var n={name:this.context.user.name};G.a.post("http://localhost:3030/profile",n,{withCredentials:!0}).then((function(){return e.setState({showNotification:!0})}))}},{key:"handleOnNameChange",value:function(t){this.setState({username:t.target.value}),this.context.editUser({name:t.target.value})}},{key:"render",value:function(){var t=this;return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(K.a,{children:Object(O.jsx)("title",{children:"StackOvercloned - your profile"})}),this.state.redirectToTheHomePage&&Object(O.jsx)(nt.a,{to:"/"}),Object(O.jsxs)(Bt,{children:[Object(O.jsx)(M,{children:"Profile"}),this.state.showConfirmation&&Object(O.jsx)(Dt,{children:"Your profile has been updated!"}),Object(O.jsx)(m,{children:function(e){return e.user?Object(O.jsxs)(O.Fragment,{children:[Object(O.jsxs)("form",{onSubmit:function(e){return t.update(e)},children:[Object(O.jsx)(rt,{placeholder:"Your name",value:t.state.username,onChange:function(e){return t.handleOnNameChange(e)}}),Object(O.jsx)(at,{children:"Update profile"})]}),Object(O.jsx)("hr",{}),Object(O.jsx)(at,{onClick:function(){return t.logout()},children:"Logout"})]}):Object(O.jsx)("p",{children:"You are not logged in"})}})]})]})}}]),n}(o.Component);Et.contextType=m;var Ht,Yt=Et,Lt=b.c.div(Ht||(Ht=Object(j.a)(["\n  display: inline-block;\n  color:#aaa;\n  font-size: .8rem;\n  float:right;\n  text-align: right;\n  padding: 10px 0;\n"])));var Rt,Qt,Mt,Vt,Jt=function(t){return Object(O.jsx)(Lt,Object(_.a)({},t))},Gt=b.c.div(Rt||(Rt=Object(j.a)(["\n  width: 0;\n  height: 0;\n  border-left: "," solid transparent;\n  border-right: "," solid transparent;\n  border-bottom: "," solid ",";\n"])),(function(t){return"sm"===t.size?"10px":"20px"}),(function(t){return"sm"===t.size?"10px":"20px"}),(function(t){return"sm"===t.size?"10px":"20px"}),(function(t){return 1===t.uservote?"#f48024":"#888"})),Kt=b.c.div(Qt||(Qt=Object(j.a)(["\n  width: 0;\n  height: 0;\n  border-left: "," solid transparent;\n  border-right: "," solid transparent;\n  border-top: "," solid ",";\n  padding:0;\n"])),(function(t){return"sm"===t.size?"10px":"20px"}),(function(t){return"sm"===t.size?"10px":"20px"}),(function(t){return"sm"===t.size?"10px":"20px"}),(function(t){return-1===t.uservote?"#f48024":"#888"})),Wt=b.c.button(Mt||(Mt=Object(j.a)(["\n  border:0;\n  background:none;\n  font-size: 2rem;\n  cursor: pointer;\n  text-align: center;\n  padding:0;\n"]))),Xt=b.c.div(Vt||(Vt=Object(j.a)(["\n  text-align: center;\n  width: ",";\n  padding: ",";\n  font-size: ",";\n  line-height: ",";\n  color: #888;\n"])),(function(t){return"sm"===t.size?"20px":"40px"}),(function(t){return"sm"===t.size?"2px 0 3px":"7px 0 7px"}),(function(t){return"sm"===t.size?".8rem":"1.4rem"}),(function(t){return"sm"===t.size?".6rem":"1.4rem"}));var Zt,$t=function(t){var e=Object(o.useState)(0),n=Object(d.a)(e,2),a=n[0],r=n[1],i=Object(o.useState)(null),c=Object(d.a)(i,2),s=c[0],l=c[1];function u(e){e===s?(l(null),r(1===e?j-1:j+1)):(l(e),r(j+e-s));var n=1===e?"up":"down";G.a.post("http://localhost:3030/vote/"+n+"/"+t.postId,{},{withCredentials:!0}).then((function(t){r(t.data)}))}var j=a||t.initialTotal||0,b=null===s?t.initialUserVote:s;return Object(O.jsxs)("div",Object(_.a)(Object(_.a)({},t),{},{children:[Object(O.jsx)(Wt,{onClick:function(){return u(1)},children:Object(O.jsx)(Gt,{size:t.size,uservote:b})}),Object(O.jsx)(Xt,{size:t.size,children:j}),Object(O.jsx)(Wt,{onClick:function(){return u(-1)},children:Object(O.jsx)(Kt,{size:t.size,uservote:b})})]}))},te=b.c.div(Zt||(Zt=Object(j.a)(["\n  display: grid;\n  grid-template-columns: 20px 1fr;\n  column-gap: 15px;\n  border-bottom: 1px solid rgba(255,255,255,.1);\n  padding: 10px 0;\n  font-size: .8rem;\n  line-height: 1.0rem;\n  color:#ddd;\n"])));var ee,ne,ae=function(t){return Object(O.jsxs)(te,{children:[Object(O.jsx)($t,{size:"sm",postId:t.comment.id,initialTotal:null===t.comment.votes_sum?0:t.comment.votes_sum,initialUserVote:t.comment.user_vote}),Object(O.jsxs)("div",{children:[t.comment.content,Object(O.jsxs)(Jt,{style:{padding:0,float:"none"},children:["\xa0\u2013\xa0",Object(O.jsx)(N,{id:t.comment.author_id,children:t.comment.user_name||t.comment.email}),"\xa0",Object(O.jsx)(z,{children:t.comment.created_at})]})]})]})},re=b.c.textarea(ee||(ee=Object(j.a)(["\n  background:none;\n  border: 1px solid #777;\n  border-radius: 3px;\n  display: block;\n  width:100%;\n  box-sizing: border-box;\n  padding: 8px;\n  line-height: 1.3rem;\n  margin-bottom: 20px;\n  color:#fff;\n  font-family: inherit;\n"]))),ie=b.c.div(ne||(ne=Object(j.a)(["\n  text-align: right;\n"])));var oe,ce=function(t){var e=Object(o.useState)(""),n=Object(d.a)(e,2),a=n[0],r=n[1];return Object(O.jsxs)("form",{onSubmit:function(e){return function(e){e.preventDefault(),t.onAddCommentClick(a),r("")}(e)},children:[Object(O.jsx)(re,{rows:3,value:a,onChange:function(t){return r(t.target.value)},style:{marginBottom:"10px"},placeholder:"Use comments to ask for more information or suggest improvements. Avoid answering questions in comments."}),Object(O.jsx)(ie,{children:Object(O.jsx)(at,{type:"submit",size:"sm",children:"Add comment"})})]})},se=b.c.button(oe||(oe=Object(j.a)(["\n  color: #3ca4ff;\n  background:none;\n  border:0;\n  cursor: pointer;\n  padding:0;\n  &:hover{\n    color: #1c84df;\n  }\n"])));var le,de=function(t){return Object(O.jsx)(se,Object(_.a)({},t))},ue=b.c.div(le||(le=Object(j.a)(["\n  margin-left: 70px;\n  border-top: 1px solid rgba(255,255,255,.1);\n"])));var je,be,pe,he,xe,me=function(t){var e=Object(o.useState)(!1),n=Object(d.a)(e,2),a=n[0],r=n[1],i=Object(o.useState)([]),c=Object(d.a)(i,2),s=c[0],l=c[1],u=0===s.length?t.initialComments:s;return Object(O.jsxs)(ue,{children:[u.map((function(t){return Object(O.jsx)(ae,{comment:t})})),a&&Object(O.jsx)(ce,{onAddCommentClick:function(e){return function(e){G.a.post("http://localhost:3030/posts",{content:e,postId:t.postId,type:"comment"},{withCredentials:!0}).then((function(t){l(t.data),r(!1)}))}(e)}}),!a&&Object(O.jsx)(de,{onClick:function(){return r(!0)},style:{padding:"10px 0"},children:"Add a comment"})]})},Oe=b.c.h2(je||(je=Object(j.a)(["\n  font-size: 1.6rem;\n"]))),fe=b.c.div(be||(be=Object(j.a)(["\n  padding: 30px 20px;\n"]))),ge=b.c.div(pe||(pe=Object(j.a)(["\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n"]))),ve=Object(b.c)(M)(he||(he=Object(j.a)(["\n  border-bottom: 1px solid rgba(255,255,255,.1);\n  padding-bottom: 10px;\n"]))),ke=b.c.div(xe||(xe=Object(j.a)(["\n  display: grid;\n  grid-template-columns: 50px 1fr;\n  column-gap: 20px;\n  margin-bottom: 20px;\n"])));var we,ye,Ce,Se,ze,_e=function(t){var e=t.match,n=Object(o.useState)(!1),a=Object(d.a)(n,2),r=a[0],i=a[1],c=Object(o.useState)(""),s=Object(d.a)(c,2),l=s[0],u=s[1],j=Object(o.useState)([]),b=Object(d.a)(j,2),p=b[0],h=b[1],x=Object(o.useState)(0),m=Object(d.a)(x,2),f=m[0],g=m[1],v=Object(o.useState)(0),k=Object(d.a)(v,2),w=k[0],y=k[1],S=Object(o.useState)([]),_=Object(d.a)(S,2),T=_[0],q=_[1],A=Object(o.useState)([]),P=Object(d.a)(A,2),F=P[0],I=P[1],U=Object(o.useState)([]),D=Object(d.a)(U,2),B=D[0],E=D[1],H=Object(o.useCallback)((function(){G.a.get("http://localhost:3030/questions/"+e.params.id,{withCredentials:!0}).then((function(t){i(t.data.question);var e=t.data.question.vote_sum;y(null===e?0:e),g(t.data.question.user_vote),h(t.data.tags)}))}),[e.params.id]),Y=Object(o.useCallback)((function(){G.a.get("http://localhost:3030/posts/comments/"+e.params.id,{withCredentials:!0}).then((function(t){q(t.data)}))}),[e.params.id]),L=Object(o.useCallback)((function(){G.a.get("http://localhost:3030/posts/answers/"+e.params.id,{withCredentials:!0}).then((function(t){E(t.data),function(t){var e=t.map((function(t){return t.id})).join(",");G.a.get("http://localhost:3030/posts/comments/"+e,{withCredentials:!0}).then((function(t){I(t.data)}))}(t.data)}))}),[e.params.id]);return Object(o.useEffect)((function(){H(),L(),Y()}),[H,L,Y]),Object(O.jsx)(O.Fragment,{children:Object(O.jsxs)(fe,{children:[r&&Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(K.a,{children:Object(O.jsxs)("title",{children:[r.title," - StackOvercloned"]})}),Object(O.jsx)(ve,{children:r.title}),Object(O.jsxs)(ke,{children:[Object(O.jsx)($t,{style:{marginTop:"10px"},initialTotal:w,initialUserVote:f,postId:r.id}),Object(O.jsxs)("div",{children:[Object(O.jsx)(st.a,{plugins:[dt.a],children:r.content}),Object(O.jsxs)(ge,{children:[Object(O.jsx)("div",{children:p.map((function(t){return Object(O.jsx)(C,{name:t.name},"tag"+t.id)}))}),Object(O.jsxs)(Jt,{children:[Object(O.jsx)(z,{children:r.created_at})," ",Object(O.jsx)(N,{children:r.name||r.email})]})]})]})]})]}),T&&Object(O.jsx)(me,{initialComments:T,postId:r.id}),B.map((function(t){return Object(O.jsxs)("div",{children:[Object(O.jsx)("hr",{}),Object(O.jsxs)(ke,{children:[Object(O.jsx)($t,{style:{marginTop:"10px"},initialTotal:t.votes_sum,initialUserVote:t.user_vote,postId:t.id}),Object(O.jsxs)("div",{children:[Object(O.jsx)(st.a,{plugins:[dt.a],children:t.content}),Object(O.jsxs)(Jt,{style:{float:"none",width:"100%"},children:[Object(O.jsx)(z,{children:t.created_at}),"\xa0",Object(O.jsx)(N,{id:t.author_id,children:t.user_name||t.email})]})]})]}),Object(O.jsx)(me,{initialComments:F.filter((function(e){return e.parent_id===t.id})),postId:t.id})]})})),Object(O.jsx)("hr",{}),Object(O.jsx)(Oe,{style:{margin:"30px 0 20px"},children:"Your Answer"}),Object(O.jsx)(ht,{value:l,placeholder:"Your answer goes here. You can use markdown",handlePostBodyChange:function(t){return u(t)}}),Object(O.jsx)(at,{onClick:function(t){return function(t){t.preventDefault();var e={postId:r.id,content:l,type:"answer"};G.a.post("http://localhost:3030/posts",e,{withCredentials:!0}).then((function(t){u(""),E(t.data)}))}(t)},children:"Post your answer"})]})})},Te=b.c.div(we||(we=Object(j.a)(["\n  display: grid;\n  grid-template-columns: 1fr min-content;\n  padding: 30px 20px;\n"]))),qe=function(t){Object(kt.a)(n,t);var e=Object(wt.a)(n);function n(t){var a;return Object(gt.a)(this,n),(a=e.call(this,t)).state={following:!1,questions:[]},a}return Object(vt.a)(n,[{key:"follow",value:function(){var t=this,e={tagName:this.props.match.params.name};G.a.post("http://localhost:3030/tags/follow",e,{withCredentials:!0}).then((function(){return t.setState({following:!0})}))}},{key:"unfollow",value:function(){var t=this,e={tagName:this.props.match.params.name};G.a.post("http://localhost:3030/tags/unfollow",e,{withCredentials:!0}).then((function(){return t.setState({following:!1})}))}},{key:"getQuestions",value:function(){var t=this;G.a.get("http://localhost:3030/questions?tagName="+this.props.match.params.name).then((function(e){return t.setState({questions:e.data})}))}},{key:"getFollowedTags",value:function(){var t=this;this.setState({following:!1}),G.a.get("http://localhost:3030/tags",{withCredentials:!0}).then((function(e){e.data.forEach((function(e){e.name===t.props.match.params.name&&e.user_id&&t.setState({following:!0})}))}))}},{key:"componentDidMount",value:function(){this.getQuestions(),this.getFollowedTags()}},{key:"componentDidUpdate",value:function(t,e,n){t.match.params.name!==this.props.match.params.name&&(this.getQuestions(),this.getFollowedTags())}},{key:"render",value:function(){var t=this,e=this.props.match;return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(K.a,{children:Object(O.jsxs)("title",{children:["StackOvercloned - ",e.params.name," questions"]})}),Object(O.jsxs)(Te,{children:[Object(O.jsx)(M,{children:e.params.name}),this.state.following&&Object(O.jsx)(at,{onClick:function(){return t.unfollow()},children:"UNFollow"}),!this.state.following&&Object(O.jsx)(at,{onClick:function(){return t.follow()},children:"Follow"})]}),Object(O.jsx)("main",{children:this.state.questions&&this.state.questions.length>0&&this.state.questions.map((function(t){return Object(O.jsx)(Q,{id:t.id,title:t.title,createdAt:t.created_at,tags:t.tags,author:{email:t.email}})}))})]})}}]),n}(o.Component),Ae=b.c.div(ye||(ye=Object(j.a)(["\n  padding: 30px 20px;\n  display: grid;\n  grid-template-columns: 1fr 200px;\n"]))),Pe=b.c.div(Ce||(Ce=Object(j.a)(["\n  text-align:right;\n"]))),Fe=Object(b.c)(x.b)(Se||(Se=Object(j.a)(["\n  background-color: rgba(255,255,255,.05);\n  padding: 15px 15px 10px;\n  display: grid;\n  grid-template-columns: 30px 1fr;\n  column-gap: 20px;\n  border-top: 1px solid #555;\n  text-decoration: none;\n"]))),Ie=b.c.div(ze||(ze=Object(j.a)(["\n  color: #bbb;\n  font-size: 2rem;\n  text-align: right;\n"])));var Ne=function(t){var e=t.match,n=Object(o.useState)(null),a=Object(d.a)(n,2),r=a[0],i=a[1],c=Object(o.useState)(null),s=Object(d.a)(c,2),l=s[0],u=s[1],j=Object(o.useState)(0),b=Object(d.a)(j,2),p=b[0],h=b[1],x=Object(o.useContext)(m),f=x.user,g=x.checkAuth,v=Object(o.useState)(!1),k=Object(d.a)(v,2),w=k[0],y=k[1];return Object(o.useEffect)((function(){G.a.get("http://localhost:3030/users/"+e.params.id).then((function(t){i(t.data.user),u(t.data.votesInfo);var e=0;t.data.votesInfo.forEach((function(t){e+=t.votes_sum})),h(e)}))}),[e.params.id]),w?Object(O.jsx)(nt.a,{to:"/"}):Object(O.jsxs)("main",{children:[!!r&&Object(O.jsx)(K.a,{children:Object(O.jsxs)("title",{children:["User: ",r.name," - StackOvercloned"]})}),Object(O.jsxs)(Ae,{children:[Object(O.jsxs)("div",{children:[Object(O.jsx)(M,{children:r&&r.name}),Object(O.jsxs)(Oe,{children:["Total points: ",p]})]}),Object(O.jsx)(Pe,{children:!!r&&!!f&&parseInt(e.params.id)===f.id&&Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(V,{to:"/profile",style:{marginBottom:"10px"},children:"Edit profile"}),Object(O.jsx)("br",{}),Object(O.jsx)(at,{onClick:function(){G.a.post("http://localhost:3030/logout",{},{withCredentials:!0}).then((function(){g().catch((function(){return y(!0)}))}))},children:"Logout"})]})})]}),Object(O.jsx)("ul",{children:l&&l.map((function(t){return Object(O.jsxs)(Fe,{to:"/questions/"+(t.parent_id||t.id),children:[Object(O.jsx)(Ie,{children:t.votes_sum}),Object(O.jsx)("div",{children:t.title||t.content})]})}))})]})};var Ue=function(){var t=Object(o.useState)(null),e=Object(d.a)(t,2),n=e[0],a=e[1];function r(){return new Promise((function(t,e){G.a.get("http://localhost:3030/profile",{withCredentials:!0}).then((function(e){a({email:e.data.email,name:e.data.name,id:e.data.id}),t(e.data)})).catch((function(){a(null),e(null)}))}))}return Object(o.useEffect)((function(){r()}),[]),Object(O.jsxs)("div",{children:[Object(O.jsx)(u.a,{}),Object(O.jsx)(ft,{}),Object(O.jsx)(x.a,{children:Object(O.jsxs)(m.Provider,{value:{user:n,checkAuth:r,editUser:function(t){var e=n;for(var r in t)e[r]=t[r],console.log(r,t[r],e);a(e)}},children:[Object(O.jsx)(w,{}),Object(O.jsxs)(nt.d,{children:[Object(O.jsx)(nt.b,{path:"/ask",component:mt}),Object(O.jsx)(nt.b,{path:"/profile",component:Yt}),Object(O.jsx)(nt.b,{path:"/login",component:qt}),Object(O.jsx)(nt.b,{path:"/register",component:It}),Object(O.jsx)(nt.b,{path:"/questions/:id",component:_e}),Object(O.jsx)(nt.b,{path:"/tag/:name",component:qe}),Object(O.jsx)(nt.b,{path:"/users/:id",component:Ne}),Object(O.jsx)(nt.b,{path:"/",component:et})]})]})})]})};l.a.render(Object(O.jsx)(c.a.StrictMode,{children:Object(O.jsx)(Ue,{})}),document.getElementById("root"))}},[[218,1,2]]]);
//# sourceMappingURL=main.4dc5a440.chunk.js.map